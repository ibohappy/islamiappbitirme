import React, { useEffect, useState, useCallback, useRef } from 'react';
import {
  View,
  Text,
  StyleSheet,
  ScrollView,
  TouchableOpacity,
  ActivityIndicator,
  Alert,
  SafeAreaView,
  Image,
  Dimensions,
  Animated,
  Modal,
  TextInput,
  Switch,
  FlatList,
} from 'react-native';
import AsyncStorage from '@react-native-async-storage/async-storage';
import { Ionicons, MaterialCommunityIcons, FontAwesome5, AntDesign } from '@expo/vector-icons';
import { useFocusEffect, useNavigation } from '@react-navigation/native';
import { 
  getPrayerInfo, 
  PrayerType, 
  getDailyPrayerTracking, 
  updatePrayerStatus,
  getPrayerName,
  PrayerStatus
} from '../../services/prayerGuideService';
import {
  checkAndUpdateStreak,
  getStreakCount,
  getDailyPrayerCompletion,
  updateDailyPrayerCompletion,
  getLastCompletedDate,
  resetDailyCompletions,
  resetStreak,
  forceUpdateStreak,
  getDailySurahCompletion,
  updateDailySurahCompletion
} from '../../services/streakService';
import {
  ZikirType,
  ZikirData,
  getZikirTypes,
  getTodayZikir,
  incrementZikir,
  saveZikirData,
  calculateZikirStats,
  getZikirHistory,
  setZikirReminder
} from '../../services/zikirService';
import { COLORS, SPACING, BORDER_RADIUS, SHADOW, FONT_SIZE, FONT_WEIGHT } from '../../constants/theme';
import * as Haptics from 'expo-haptics';

// Ekran boyutlarƒ±nƒ± al
const { width: SCREEN_WIDTH } = Dimensions.get('window');

// Namaz kƒ±lma rehberi ekranƒ±
const PrayerGuideScreen: React.FC = () => {
  const [activeTab, setActiveTab] = useState<PrayerType | 'general' | 'beginners'>('general');
  const [prayerTracking, setPrayerTracking] = useState<PrayerStatus[]>([]);
  const [loading, setLoading] = useState(true);
  const [streakCount, setStreakCount] = useState<number>(0);
  const [streakUpdated, setStreakUpdated] = useState(false);
  const [completedSurahs, setCompletedSurahs] = useState<number>(0);
  const [completedPrayers, setCompletedPrayers] = useState<number>(0);
  const scaleAnim = useState(new Animated.Value(1))[0];
  const navigation = useNavigation();
  
  // Zikirmatik i√ßin state'ler
  const [zikirCount, setZikirCount] = useState<number>(0);
  const [zikirGoal, setZikirGoal] = useState<number>(100);
  const [zikirType, setZikirType] = useState<string>('Genel');
  const [showZikirModal, setShowZikirModal] = useState(false);
  const [showZikirTypesModal, setShowZikirTypesModal] = useState(false);
  const [showZikirStatsModal, setShowZikirStatsModal] = useState(false);
  const [showReminderModal, setShowReminderModal] = useState(false);
  const [zikirTypes, setZikirTypes] = useState<ZikirType[]>([]);
  const [activeZikirType, setActiveZikirType] = useState<ZikirType | null>(null);
  const [enableVibration, setEnableVibration] = useState<boolean>(true);
  const [enableSound, setEnableSound] = useState<boolean>(false);
  const [zikirStats, setZikirStats] = useState({
    todayTotal: 0,
    weeklyTotal: 0,
    monthlyTotal: 0,
    mostCommonZikir: '',
    streakDays: 0
  });
  const [zikirHistory, setZikirHistory] = useState<any[]>([]);
  const [reminderHour, setReminderHour] = useState<string>('08');
  const [reminderMinute, setReminderMinute] = useState<string>('00');
  const zikirScaleAnim = useState(new Animated.Value(1))[0];
  const soundRef = useRef(null);
  
  // State'lere ZikirData ekleyelim
  const [activeZikirData, setActiveZikirData] = useState<ZikirData | null>(null);
  const [showCalendarModal, setShowCalendarModal] = useState(false);

  // Streak sayƒ±sƒ±nƒ± y√ºkle
  const loadStreakCount = async () => {
    try {
      const count = await getStreakCount();
      setStreakCount(count);
    } catch (error) {
      console.error('Streak sayƒ±sƒ± y√ºklenirken hata olu≈ütu:', error);
    }
  };

  // Zikir t√ºrlerini y√ºkle
  const loadZikirTypes = async () => {
    try {
      const types = await getZikirTypes();
      setZikirTypes(types);
    } catch (error) {
      console.error('Zikir t√ºrleri y√ºklenirken hata:', error);
    }
  };
  
  // useEffect ile zikir t√ºrlerini y√ºkle
  useEffect(() => {
    loadZikirTypes();
  }, []);
  
  // Zikirmatik verilerini y√ºkle
  const loadZikirData = async () => {
    try {
      // Mevcut zikir t√ºrlerini y√ºkle
      const types = await getZikirTypes();
      setZikirTypes(types);
      
      // Eƒüer aktif zikir t√ºr√º se√ßilmemi≈üse, varsayƒ±lan olarak ilkini se√ß
      if (!activeZikirType && types.length > 0) {
        setActiveZikirType(types[0]);
        
        // Bu zikir t√ºr√º i√ßin veri varsa y√ºkle
        const data = await getTodayZikir(types[0].id);
        
        if (data) {
          // Aktif zikir verisini ayarla
          setActiveZikirData(data);
          setZikirCount(data.count);
          setZikirGoal(data.goal);
          setZikirType(data.zikr_type);
        } else {
          // Eƒüer veri yoksa, varsayƒ±lan deƒüerleri ayarla
          setZikirCount(0);
          setZikirGoal(types[0].recommended_count);
          setZikirType(types[0].name);
        }
      } else if (activeZikirType) {
        // Aktif zikir t√ºr√º varsa, o t√ºr√ºn verilerini y√ºkle
        const data = await getTodayZikir(activeZikirType.id);
        
        if (data) {
          // Aktif zikir verisini ayarla
          setActiveZikirData(data);
          setZikirCount(data.count);
          setZikirGoal(data.goal);
        } else {
          // Veri yoksa varsayƒ±lan deƒüerler
          setZikirCount(0);
          setZikirGoal(activeZikirType.recommended_count);
        }
      }
    } catch (error) {
      console.error('Zikir verileri y√ºklenirken hata:', error);
    }
  };
  
  // Zikir istatistiklerini y√ºkle
  const loadZikirStats = async () => {
    try {
      const stats = await calculateZikirStats();
      setZikirStats(stats);
      
      const history = await getZikirHistory();
      setZikirHistory(history);
    } catch (error) {
      console.error('Zikir istatistikleri y√ºklenirken hata:', error);
    }
  };
  
  // Zikir sayacƒ±nƒ± artƒ±r
  const handleZikirIncrement = async (zikirSubType: string = 'general') => {
    try {
      // Aktif zikir t√ºr√º yoksa i≈ülem yapma
      if (!activeZikirType) {
        Alert.alert('Hata', 'Zikir t√ºr√º se√ßilmemi≈ü. L√ºtfen bir zikir t√ºr√º se√ßin.');
        return;
      }
      
      // Sayƒ±yƒ± direk olarak artƒ±ralƒ±m (servis √ßaƒürƒ±sƒ±nƒ± beklemeden)
      setZikirCount(prevCount => prevCount + 1);
      
      // Animasyon efekti
      Animated.sequence([
        Animated.timing(zikirScaleAnim, {
          toValue: 1.1,
          duration: 100,
          useNativeDriver: true
        }),
        Animated.timing(zikirScaleAnim, {
          toValue: 1,
          duration: 100,
          useNativeDriver: true
        })
      ]).start();
      
      // Titre≈üim geri bildirimi
      if (enableVibration) {
        try {
          if ((zikirCount + 1) % 33 === 0) {
            Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Heavy);
          } else if ((zikirCount + 1) % 10 === 0) {
            Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);
          } else {
            Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);
          }
        } catch (error) {
          console.error('Titre≈üim √ßalƒ±≈üƒ±rken hata:', error);
        }
      }
      
      // Bug√ºnk√º zikir verilerini y√ºkle
      const data = await getTodayZikir(activeZikirType.id);
      
      if (data) {
        // Zikir sayƒ±sƒ±nƒ± artƒ±r (arkaplanda)
        await incrementZikir(data, false, enableSound, zikirSubType); // titre≈üim zaten yaptƒ±k
        
        // Hedef tamamlandƒ±ysa bildirim g√∂ster
        if (zikirCount + 1 >= zikirGoal && !data.completed) {
          setTimeout(() => {
            Alert.alert(
              'Tebrikler!',
              `${activeZikirType.name} hedefinize ula≈ütƒ±nƒ±z! üéâ`,
              [{ text: 'Te≈üekk√ºrler', style: 'default' }]
            );
          }, 500);
        }
      }
      
      // Zikir verilerini yeniden y√ºkle
      await loadZikirData();
      
      // Zikir istatistiklerini g√ºncelle
      await loadZikirStats();
    } catch (error) {
      console.error('Zikir artƒ±rƒ±lƒ±rken hata:', error);
    }
  };
  
  // Zikir t√ºr√ºn√º deƒüi≈ütir
  const handleZikirTypeChange = async (type: ZikirType) => {
    setActiveZikirType(type);
    setZikirType(type.name);
    setShowZikirTypesModal(false);
    
    // Yeni zikir t√ºr√º i√ßin verileri y√ºkle
    try {
      const data = await getTodayZikir(type.id);
      
      if (data) {
        setZikirCount(data.count);
        setZikirGoal(data.goal);
      } else {
        setZikirCount(0);
        setZikirGoal(type.recommended_count);
        
        const today = new Date().toISOString().split('T')[0];
        const newData: ZikirData = {
          id: `${today}_${type.id}`,
          user_id: 'default',
          date: today,
          count: 0,
          goal: type.recommended_count,
          zikr_type: type.name,
          completed: false,
          last_updated: new Date().toISOString()
        };
        
        await saveZikirData(newData);
      }
    } catch (error) {
      console.error('Zikir t√ºr√º deƒüi≈ütirilirken hata:', error);
    }
  };
  
  // Zikir hedefini g√ºncelle
  const handleGoalUpdate = async (newGoal: number) => {
    try {
      // Aktif zikir t√ºr√º yoksa i≈ülem yapma
      if (!activeZikirType) {
        return;
      }
      
      setZikirGoal(newGoal);
      
      // Bug√ºnk√º zikir verilerini y√ºkle
      const data = await getTodayZikir(activeZikirType.id);
      
      if (data) {
        // Hedefi g√ºncelle
        data.goal = newGoal;
        await saveZikirData(data);
      } else {
        // Yeni bir zikir kaydƒ± olu≈ütur
        const today = new Date().toISOString().split('T')[0];
        const newData: ZikirData = {
          id: `${today}_${activeZikirType.id}`,
          user_id: 'default',
          date: today,
          count: 0,
          goal: newGoal,
          zikr_type: activeZikirType.name,
          completed: false,
          last_updated: new Date().toISOString()
        };
        
        await saveZikirData(newData);
      }
    } catch (error) {
      console.error('Zikir hedefi g√ºncellenirken hata:', error);
    }
  };
  
  // Hatƒ±rlatƒ±cƒ± ayarla
  const handleSetReminder = async () => {
    try {
      const hour = parseInt(reminderHour, 10);
      const minute = parseInt(reminderMinute, 10);
      
      if (isNaN(hour) || hour < 0 || hour > 23 || isNaN(minute) || minute < 0 || minute > 59) {
        Alert.alert('Hata', 'L√ºtfen ge√ßerli bir saat ve dakika girin.');
        return;
      }
      
      const reminderTime = new Date();
      reminderTime.setHours(hour, minute, 0, 0);
      
      await setZikirReminder(reminderTime);
      
      Alert.alert('Ba≈üarƒ±lƒ±', `Zikir hatƒ±rlatƒ±cƒ±sƒ± ${reminderHour}:${reminderMinute} i√ßin ayarlandƒ±.`);
      setShowReminderModal(false);
    } catch (error) {
      console.error('Hatƒ±rlatƒ±cƒ± ayarlanƒ±rken hata:', error);
      Alert.alert('Hata', 'Hatƒ±rlatƒ±cƒ± ayarlanƒ±rken bir sorun olu≈ütu.');
    }
  };

  // Tamamlanan sure sayƒ±sƒ±nƒ± y√ºkle
  const loadCompletedSurahs = async () => {
    try {
      // Bug√ºn√ºn tarihini kontrol et
      const today = new Date().toISOString().split('T')[0]; // YYYY-MM-DD formatƒ±
      const lastCompletedDate = await getLastCompletedDate();
      const lastLoadTime = await AsyncStorage.getItem('last_surah_load_time');
      const currentTime = new Date().getTime().toString();
      const lastResetDate = await AsyncStorage.getItem('last_surah_reset_date');
      
      // Eƒüer son y√ºkleme zamanƒ± son 10 saniye i√ßindeyse kontrol√º atla
      if (lastLoadTime && (parseInt(currentTime) - parseInt(lastLoadTime)) < 10000) {
        return;
      }
      
      // Son y√ºkleme zamanƒ±nƒ± g√ºncelle
      await AsyncStorage.setItem('last_surah_load_time', currentTime);
      
      // Eƒüer bug√ºn i√ßin sure sayƒ±sƒ± zaten kaydedilmi≈üse, onu getir
      if (lastCompletedDate === today) {
        const completedSurahsStr = await AsyncStorage.getItem('completed_surahs_count');
        const completedCount = completedSurahsStr ? parseInt(completedSurahsStr, 10) : 0;
        setCompletedSurahs(completedCount);
      } else {
        // Eƒüer bug√ºn i√ßin sure sayƒ±sƒ± hen√ºz sƒ±fƒ±rlanmamƒ±≈üsa sƒ±fƒ±rla
        if (lastResetDate !== today) {
        setCompletedSurahs(0);
        await AsyncStorage.setItem('completed_surahs_count', '0');
          await AsyncStorage.setItem('last_surah_reset_date', today);
        console.log('PrayerGuideScreen - Yeni g√ºn, sure sayƒ±sƒ± sƒ±fƒ±rlandƒ±');
        } else {
          // Bug√ºn zaten sƒ±fƒ±rlama yapƒ±lmƒ±≈ü, mevcut deƒüeri getir
          const completedSurahsStr = await AsyncStorage.getItem('completed_surahs_count');
          const completedCount = completedSurahsStr ? parseInt(completedSurahsStr, 10) : 0;
          setCompletedSurahs(completedCount);
          console.log('PrayerGuideScreen - Bug√ºn zaten sure sayƒ±sƒ± sƒ±fƒ±rlanmƒ±≈ü');
        }
      }
    } catch (error) {
      console.error('Sure sayƒ±sƒ± y√ºklenirken hata olu≈ütu:', error);
      setCompletedSurahs(0);
    }
  };

  // Namaz takibini y√ºkle
  const loadPrayerTracking = async () => {
    try {
      setLoading(true);
      const tracking = await getDailyPrayerTracking();
      setPrayerTracking(tracking);
      
      // Tamamlanan namaz sayƒ±sƒ±nƒ± g√ºncelle
      const completedCount = tracking.filter(p => p.completed).length;
      setCompletedPrayers(completedCount);
      
      // Namaz tamamlama durumunu kontrol et
      const allCompleted = checkPrayerCompletion(tracking);
      
      // Namaz tamamlama durumunu g√ºncelle
      await updateDailyPrayerCompletion(allCompleted);
      
      // G√ºncel streak sayƒ±sƒ±nƒ± al
      const currentStreak = await getStreakCount();
      
      // Streak sayƒ±sƒ±nƒ± g√ºncelle
      setStreakCount(currentStreak);
      
      console.log('Namaz takibi y√ºklendi:', tracking);
      console.log('Tamamlanan namaz sayƒ±sƒ±:', completedCount);
      console.log('Streak sayƒ±sƒ±:', currentStreak);
      
      return tracking;
    } catch (error) {
      console.error('Namaz takibi y√ºklenirken hata olu≈ütu:', error);
      Alert.alert('Hata', 'Namaz takibi y√ºklenirken bir hata olu≈ütu.');
      return [];
    } finally {
      setLoading(false);
    }
  };

  // Namaz tamamlama durumunu kontrol et
  const checkPrayerCompletion = (prayerTracking: PrayerStatus[]): boolean => {
    if (!prayerTracking || prayerTracking.length === 0) return false;
    return prayerTracking.every(prayer => prayer.completed);
  };

  // Namaz durumunu g√ºncelle
  const handlePrayerStatusUpdate = async (
    prayerType: PrayerType,
    completed: boolean
  ) => {
    try {
      // Namaz durumunu g√ºncelle
      await updatePrayerStatus(prayerType, completed);
      
      // G√ºncel namaz takibini y√ºkle
      const updatedTracking = await getDailyPrayerTracking();
      setPrayerTracking(updatedTracking);
      
      // Tamamlanan namaz sayƒ±sƒ±nƒ± g√ºncelle
      const completedCount = updatedTracking.filter(p => p.completed).length;
      setCompletedPrayers(completedCount);
      
      // Namaz tamamlama durumunu kontrol et
      const allCompleted = checkPrayerCompletion(updatedTracking);
      
      // Namaz tamamlama durumunu g√ºncelle
      await updateDailyPrayerCompletion(allCompleted);
      
      // Sure tamamlama durumunu kontrol et
      const surahCompleted = await getDailySurahCompletion();
      
      // Animasyon efekti ekle
      Animated.sequence([
        Animated.timing(scaleAnim, {
          toValue: 1.1,
          duration: 100,
          useNativeDriver: true
        }),
        Animated.timing(scaleAnim, {
          toValue: 1,
          duration: 100,
          useNativeDriver: true
        })
      ]).start();
      
      // Streak sayƒ±sƒ±nƒ± g√ºncelle
      await loadStreakCount();
      
      // Eƒüer t√ºm namazlar ve sureler tamamlandƒ±ysa bildirim g√∂ster
      if (allCompleted && surahCompleted) {
        setStreakUpdated(true);
      } else if (allCompleted) {
        // T√ºm namazlar tamamlandƒ± ancak sureler tamamlanmadƒ±
        Alert.alert(
          'Tebrikler!',
          'T√ºm g√ºnl√ºk namazlarƒ±nƒ±zƒ± tamamladƒ±nƒ±z! Streak\'inizi artƒ±rmak i√ßin g√ºnl√ºk sureleri de tamamlamayƒ± unutmayƒ±n.',
          [{ text: 'Tamam', style: 'default' }]
        );
      }
    } catch (error) {
      console.error('Namaz durumu g√ºncellenirken hata olu≈ütu:', error);
      Alert.alert('Hata', 'Namaz durumu g√ºncellenirken bir sorun olu≈ütu.');
    }
  };

  // Ekran odaklandƒ±ƒüƒ±nda √ßalƒ±≈üacak
  useFocusEffect(
    useCallback(() => {
      console.log('PrayerGuideScreen - Ekran odaklandƒ±');
      
      // G√ºnl√ºk tamamlama durumlarƒ±nƒ± sƒ±fƒ±rla
      // resetDailyCompletions();
      
      // Namaz takibini ve streak sayƒ±sƒ±nƒ± y√ºkle
      const loadData = async () => {
        try {
          console.log('PrayerGuideScreen - Veriler y√ºkleniyor...');

          // G√ºn√ºn deƒüi≈üip deƒüi≈ümediƒüini kontrol et
          const today = new Date().toISOString().split('T')[0];
          const lastCheckedDay = await AsyncStorage.getItem('last_checked_day');
          
          // Eƒüer g√ºn deƒüi≈ütiyse veya son kontrol g√ºn√º yoksa
          if (lastCheckedDay !== today) {
            // G√ºnl√ºk tamamlama durumlarƒ±nƒ± sƒ±fƒ±rla
            await resetDailyCompletions();
            // Son kontrol g√ºn√ºn√º g√ºncelle
            await AsyncStorage.setItem('last_checked_day', today);
            console.log('PrayerGuideScreen - Yeni g√ºn ba≈üladƒ±, tamamlama durumlarƒ± sƒ±fƒ±rlandƒ±');
          } else {
            console.log('PrayerGuideScreen - Aynƒ± g√ºn i√ßinde, sƒ±fƒ±rlama yapƒ±lmadƒ±');
          }
          
          // Namaz takibini y√ºkle
          const tracking = await loadPrayerTracking();
          console.log('PrayerGuideScreen - Namaz takibi y√ºklendi:', tracking);
          
          // Sure sayƒ±sƒ±nƒ± y√ºkle
          await loadCompletedSurahs();
          console.log('PrayerGuideScreen - Sure sayƒ±sƒ± y√ºklendi:', completedSurahs);
          
          // Zikir t√ºrlerini y√ºkle
          await loadZikirTypes();
          console.log('PrayerGuideScreen - Zikir t√ºrleri y√ºklendi');
          
          // Zikirmatik verilerini y√ºkle
          await loadZikirData();
          console.log('PrayerGuideScreen - Zikirmatik verileri y√ºklendi');
          
          // Zikir istatistiklerini y√ºkle
          await loadZikirStats();
          console.log('PrayerGuideScreen - Zikir istatistikleri y√ºklendi');
          
          console.log('PrayerGuideScreen - T√ºm veriler ba≈üarƒ±yla y√ºklendi');
        } catch (error) {
          console.error('PrayerGuideScreen - Veri y√ºklenirken hata olu≈ütu:', error);
        }
      };
      
      loadData();
      
      // Her 30 saniyede bir sure sayƒ±sƒ±nƒ± ve zikir verilerini g√ºncelle
      const interval = setInterval(() => {
        loadCompletedSurahs();
        loadZikirData();
      }, 30000); // 30 saniye
      
      return () => {
        clearInterval(interval);
        console.log('PrayerGuideScreen - Ekrandan ayrƒ±ldƒ±');
      };
    }, [])
  );

  // Streak g√ºncellendiƒüinde bildirim g√∂ster
  useEffect(() => {
    if (streakUpdated) {
      Alert.alert(
        'Tebrikler!',
        `Streak'iniz ${streakCount} g√ºne y√ºkseldi! Her g√ºn d√ºzenli olarak ibadetlerinizi yapmaya devam edin.`,
        [{ text: 'Te≈üekk√ºrler', style: 'default' }]
      );
      setStreakUpdated(false);
    }
  }, [streakUpdated, streakCount]);

  // Namaz bilgilerini getir
  const prayerInfo = getPrayerInfo();

  // Aktif namazƒ±n bilgilerini getir
  const getActivePrayerInfo = () => {
    if (activeTab === 'general') return null;
    return prayerInfo.find((prayer) => prayer.type === activeTab);
  };

  // Aktif namazƒ±n takip durumunu getir
  const getActivePrayerTracking = () => {
    if (activeTab === 'general') return null;
    return prayerTracking.find((prayer) => prayer.type === activeTab);
  };

  // Namaz i√ßin onay kutusu
  const PrayerCheckbox = ({
    prayerType,
    name,
    rakats,
  }: {
    prayerType: PrayerType;
    name: string;
    rakats: number;
  }) => {
    const tracking = prayerTracking.find((p) => p.type === prayerType);
    const isCompleted = tracking?.completed || false;

    return (
      <TouchableOpacity
        style={styles.checkboxContainer}
        onPress={() =>
          handlePrayerStatusUpdate(prayerType, !isCompleted)
        }
      >
        <View style={[styles.checkbox, isCompleted && styles.checkboxChecked]}>
          {isCompleted && <Ionicons name="checkmark" size={16} color="#fff" />}
        </View>
        <Text style={styles.checkboxLabel}>
          {name} ({rakats} rekat)
        </Text>
      </TouchableOpacity>
    );
  };

  // Streak g√∂stergesi
  const StreakIndicator = () => (
    <View style={styles.streakIndicatorContainer}>
      <View style={styles.streakIndicatorContent}>
        <View style={styles.streakIndicatorIcon}>
          <FontAwesome5 name="fire" size={24} color="#FF9800" />
      </View>
        <View style={styles.streakIndicatorTextContainer}>
          <Text style={styles.streakIndicatorTitle}>{streakCount} G√ºnl√ºk Streak</Text>
          <Text style={styles.streakIndicatorDescription}>D√ºzenli ibadet alƒ±≈ükanlƒ±ƒüƒ±nƒ±z</Text>
        </View>
        <View style={styles.streakIndicatorBadge}>
          <Text style={styles.streakIndicatorCount}>{streakCount}</Text>
        </View>
      </View>
    </View>
  );

  // Genel namaz bilgileri i√ßeriƒüi
  const GeneralContent = () => (
    <ScrollView style={styles.contentContainer}>
      {activeTab === 'general' ? (
        <View>
          <View style={styles.sectionContainer}>
            <Text style={styles.sectionTitle}>Namazƒ±n √ñnemi</Text>
            <Text style={styles.paragraph}>
              Namaz, ƒ∞slam'ƒ±n be≈ü ≈üartƒ±ndan biridir ve g√ºnde be≈ü vakit kƒ±lƒ±nmasƒ± farzdƒ±r. 
              Namaz, Allah ile kul arasƒ±ndaki en √∂nemli baƒüdƒ±r ve M√ºsl√ºmanlarƒ±n g√ºnl√ºk hayatƒ±nƒ±n 
              ayrƒ±lmaz bir par√ßasƒ±dƒ±r.
            </Text>
            <Text style={styles.paragraph}>
              "Namazƒ± dosdoƒüru kƒ±lƒ±n, zek√¢tƒ± verin. Kendiniz i√ßin her ne iyilik hazƒ±rlarsanƒ±z Allah katƒ±nda onu bulursunuz. ≈û√ºphesiz Allah b√ºt√ºn yaptƒ±klarƒ±nƒ±zƒ± g√∂r√ºr." (Bakara Suresi, 110)
            </Text>
          </View>
          
          <View style={styles.sectionContainer}>
            <Text style={styles.sectionTitle}>Namaza Hazƒ±rlƒ±k</Text>
            <View style={styles.itemContainer}>
              <View style={styles.infoCard}>
                <View style={styles.iconCircle}>
                  <FontAwesome5 name="hands-wash" size={24} color="#4CAF50" />
                </View>
                <Text style={styles.cardTitle}>1. Abdest Almak</Text>
                <Text style={styles.cardDescription}>
                  Namaz kƒ±lmadan √∂nce abdest almak gerekir. Abdest, elleri, aƒüzƒ±, burnu, y√ºz√º, 
                  kollarƒ±, ba≈üƒ± mesh etmeyi ve ayaklarƒ± yƒ±kamayƒ± i√ßerir.
                </Text>
              </View>
              
              <View style={styles.infoCard}>
                <View style={styles.iconCircle}>
                  <FontAwesome5 name="tshirt" size={24} color="#4CAF50" />
                </View>
                <Text style={styles.cardTitle}>2. Temiz Kƒ±yafet</Text>
                <Text style={styles.cardDescription}>
                  Namaz kƒ±larken temiz ve √∂rt√ºl√º kƒ±yafetler giyilmelidir. Erkekler i√ßin en az g√∂bek ile diz kapaƒüƒ± arasƒ±, kadƒ±nlar i√ßin ise y√ºz, eller ve ayaklar hari√ß t√ºm v√ºcut √∂rt√ºlmelidir.
                </Text>
              </View>
              
              <View style={styles.infoCard}>
                <View style={styles.iconCircle}>
                  <FontAwesome5 name="broom" size={24} color="#4CAF50" />
                </View>
                <Text style={styles.cardTitle}>3. Temiz Yer</Text>
                <Text style={styles.cardDescription}>
                  Namaz kƒ±lƒ±nacak yerin temiz olmasƒ± gerekir. Namaz kƒ±lacaƒüƒ±nƒ±z yer temiz olmalƒ± ve seccadenin altƒ± da necasetten arƒ±ndƒ±rƒ±lmƒ±≈ü olmalƒ±dƒ±r.
                </Text>
              </View>
              
              <View style={styles.infoCard}>
                <View style={styles.iconCircle}>
                  <FontAwesome5 name="compass" size={24} color="#4CAF50" />
                </View>
                <Text style={styles.cardTitle}>4. Kƒ±bleye Y√∂nelmek</Text>
                <Text style={styles.cardDescription}>
                  Namaz kƒ±larken K√¢be'ye (kƒ±bleye) y√∂nelmek gerekir. Kƒ±ble y√∂n√ºn√º bulmak i√ßin pusula veya kƒ±ble bulucu uygulamalardan faydalanabilirsiniz.
                </Text>
              </View>
            </View>
          </View>
          
          <View style={styles.sectionContainer}>
            <Text style={styles.sectionTitle}>Namazƒ±n R√ºk√ºnleri</Text>
            
            <View style={styles.stepContainer}>
              <View style={styles.stepNumber}>
                <Text style={styles.stepNumberText}>1</Text>
              </View>
              <View style={styles.stepContent}>
                <Text style={styles.stepTitle}>Niyet</Text>
                <Text style={styles.stepDescription}>
                  Hangi namazƒ± kƒ±lacaƒüƒ±nƒ±za dair niyet etmek. Niyet kalben yapƒ±lƒ±r, dil ile s√∂ylenmesi gerekmez.
                </Text>
              </View>
            </View>
            
            <View style={styles.stepContainer}>
              <View style={styles.stepNumber}>
                <Text style={styles.stepNumberText}>2</Text>
              </View>
              <View style={styles.stepContent}>
                <Text style={styles.stepTitle}>ƒ∞ftitah Tekbiri</Text>
                <Text style={styles.stepDescription}>
                  "Allahu Ekber" diyerek namaza ba≈ülamak. Bu tekbir namaza ba≈ülarken eller kulak hizasƒ±na kaldƒ±rƒ±larak yapƒ±lƒ±r.
                </Text>
              </View>
            </View>
            
            <View style={styles.stepContainer}>
              <View style={styles.stepNumber}>
                <Text style={styles.stepNumberText}>3</Text>
              </View>
              <View style={styles.stepContent}>
                <Text style={styles.stepTitle}>Kƒ±yam</Text>
                <Text style={styles.stepDescription}>
                  Ayakta durmak. Kƒ±yamda eller baƒülanƒ±r ve g√∂zler secde yerine bakacak ≈üekilde durulur.
                </Text>
              </View>
            </View>
            
            <View style={styles.stepContainer}>
              <View style={styles.stepNumber}>
                <Text style={styles.stepNumberText}>4</Text>
              </View>
              <View style={styles.stepContent}>
                <Text style={styles.stepTitle}>Kƒ±raat</Text>
                <Text style={styles.stepDescription}>
                  Fatiha suresini ve ardƒ±ndan Kur'an'dan bir sure veya ayet okumak. Her rekatta Fatiha suresi okunur.
                </Text>
              </View>
            </View>
            
            <View style={styles.stepContainer}>
              <View style={styles.stepNumber}>
                <Text style={styles.stepNumberText}>5</Text>
              </View>
              <View style={styles.stepContent}>
                <Text style={styles.stepTitle}>R√ºk√ª</Text>
                <Text style={styles.stepDescription}>
                  Eƒüilmek ve "S√ºbhane Rabbiyel Azim" demek. R√ºk√ªda sƒ±rt d√ºz olmalƒ± ve en az √º√ß kez tesbih √ßekilmelidir.
                </Text>
              </View>
            </View>
            
            <View style={styles.stepContainer}>
              <View style={styles.stepNumber}>
                <Text style={styles.stepNumberText}>6</Text>
              </View>
              <View style={styles.stepContent}>
                <Text style={styles.stepTitle}>Secde</Text>
                <Text style={styles.stepDescription}>
                  Alnƒ±, burnu, elleri, dizleri ve ayak parmaklarƒ±nƒ± yere koyarak secde etmek ve "S√ºbhane Rabbiyel Ala" demek. En az √º√ß kez tesbih √ßekilmelidir.
                </Text>
              </View>
            </View>
            
            <View style={styles.stepContainer}>
              <View style={styles.stepNumber}>
                <Text style={styles.stepNumberText}>7</Text>
              </View>
              <View style={styles.stepContent}>
                <Text style={styles.stepTitle}>Oturu≈ü (Ka'de)</Text>
                <Text style={styles.stepDescription}>
                  ƒ∞ki secde arasƒ±nda ve namazƒ±n sonunda oturmak. Son oturu≈üta Ettehiyyat√º, Salli-Barik ve dua okunur.
                </Text>
              </View>
            </View>
            
            <View style={styles.stepContainer}>
              <View style={styles.stepNumber}>
                <Text style={styles.stepNumberText}>8</Text>
              </View>
              <View style={styles.stepContent}>
                <Text style={styles.stepTitle}>Selam</Text>
                <Text style={styles.stepDescription}>
                  Namazƒ±n sonunda √∂nce saƒüa sonra sola "Esselam√º aleyk√ºm ve rahmetullah" diyerek selam vermek.
                </Text>
              </View>
            </View>
          </View>
          
          <View style={styles.sectionContainer}>
            <Text style={styles.sectionTitle}>Namaz √áe≈üitleri</Text>
            
            <View style={styles.infoContainer}>
              <View style={styles.infoItem}>
                <View style={styles.infoIconContainer}>
                  <FontAwesome5 name="star" size={20} color="#4CAF50" />
                </View>
                <View style={styles.infoContent}>
                  <Text style={styles.infoTitle}>Farz Namazlar</Text>
                  <Text style={styles.infoDescription}>
                    G√ºnde be≈ü vakit kƒ±lƒ±nmasƒ± zorunlu olan namazlar: Sabah (2 rek√¢t), √ñƒüle (4 rek√¢t), ƒ∞kindi (4 rek√¢t), Ak≈üam (3 rek√¢t), Yatsƒ± (4 rek√¢t).
                  </Text>
                </View>
              </View>
              
              <View style={styles.infoItem}>
                <View style={styles.infoIconContainer}>
                  <FontAwesome5 name="star-half-alt" size={20} color="#4CAF50" />
                </View>
                <View style={styles.infoContent}>
                  <Text style={styles.infoTitle}>Vacip Namazlar</Text>
                  <Text style={styles.infoDescription}>
                    Vitir namazƒ± ve bayram namazlarƒ± gibi kƒ±lƒ±nmasƒ± vacip olan namazlar. Vacip namazlar, farz kadar kesin olmamakla birlikte, kƒ±lƒ±nmasƒ± gereken namazlardƒ±r.
                  </Text>
                </View>
              </View>
              
              <View style={styles.infoItem}>
                <View style={styles.infoIconContainer}>
                  <FontAwesome5 name="check" size={20} color="#4CAF50" />
                </View>
                <View style={styles.infoContent}>
                  <Text style={styles.infoTitle}>S√ºnnet Namazlar</Text>
                  <Text style={styles.infoDescription}>
                    Farz namazlardan √∂nce veya sonra kƒ±lƒ±nan namazlar. Hz. Peygamber'in d√ºzenli olarak kƒ±ldƒ±ƒüƒ± namazlardƒ±r.
                  </Text>
                </View>
              </View>
              
              <View style={styles.infoItem}>
                <View style={styles.infoIconContainer}>
                  <FontAwesome5 name="heart" size={20} color="#4CAF50" />
                </View>
                <View style={styles.infoContent}>
                  <Text style={styles.infoTitle}>Nafile Namazlar</Text>
                  <Text style={styles.infoDescription}>
                    Farz, vacip ve s√ºnnet dƒ±≈üƒ±nda kƒ±lƒ±nan namazlar. Tehecc√ºd, Duha (Ku≈üluk), Evvabin, Tehiyyet√º'l-Mescid gibi namazlar bu kategoriye girer.
                  </Text>
                </View>
              </View>
            </View>
          </View>
        </View>
      ) : null}
    </ScrollView>
  );

  // Aktif namazƒ±n i√ßeriƒüi
  const PrayerContent = () => {
    const prayer = getActivePrayerInfo();
    const tracking = getActivePrayerTracking();

    if (!prayer || !tracking) return null;

    return (
      <ScrollView style={styles.contentContainer}>
        <Text style={styles.title}>{prayer.name}</Text>
        <Text style={styles.arabicTitle}>{prayer.arabicName}</Text>
        
        <View style={styles.infoContainer}>
          <Text style={styles.infoLabel}>Namaz Vakti:</Text>
          <Text style={styles.infoValue}>{prayer.time}</Text>
        </View>
        
        <Text style={styles.sectionTitle}>A√ßƒ±klama</Text>
        <Text style={styles.paragraph}>{prayer.description}</Text>
        
        <Text style={styles.sectionTitle}>Rekat Sayƒ±sƒ±</Text>
        <View style={styles.rakatsContainer}>
          <View style={styles.rakatItem}>
            <Text style={styles.rakatLabel}>Toplam:</Text>
            <Text style={styles.rakatValue}>{prayer.rakats} rekat</Text>
          </View>
        </View>
      </ScrollView>
    );
  };

  // Namaz Takip Kartlarƒ±
  const PrayerTrackingCards = ({ 
    completedPrayers, 
    completedSurahs, 
    streakCount, 
    onPrayerComplete, 
    onSurahComplete,
    prayerTrackingData
  }: { 
    completedPrayers: number; 
    completedSurahs: number; 
    streakCount: number; 
    onPrayerComplete: () => Promise<void>; 
    onSurahComplete: () => Promise<void>;
    prayerTrackingData?: PrayerStatus[];
  }) => {
    const [showPrayerModal, setShowPrayerModal] = useState(false);
    const [prayerTracking, setPrayerTracking] = useState<PrayerStatus[]>([]);
    const [localCompletedCount, setLocalCompletedCount] = useState(completedPrayers);
    const [isLoading, setIsLoading] = useState(false);
    
    // Ana bile≈üenden gelen namaz verilerini kullan
    useEffect(() => {
      if (prayerTrackingData && prayerTrackingData.length > 0) {
        setPrayerTracking(prayerTrackingData);
        const completedCount = prayerTrackingData.filter(p => p.completed).length;
        setLocalCompletedCount(completedCount);
        console.log('PrayerTrackingCards - Ana bile≈üenden gelen veriler kullanƒ±ldƒ±:', prayerTrackingData);
        console.log('PrayerTrackingCards - Tamamlanan namaz sayƒ±sƒ±:', completedCount);
      }
    }, [prayerTrackingData]);
    
    // Modal a√ßƒ±ldƒ±ƒüƒ±nda verileri yeniden y√ºkle
    useEffect(() => {
      if (showPrayerModal) {
        loadPrayerTracking();
      }
    }, [showPrayerModal]);
    
    const loadPrayerTracking = async () => {
      try {
        setIsLoading(true);
        
        // Varsayƒ±lan namaz durumunu olu≈ütur
        const defaultTracking = [
          { type: PrayerType.FAJR, completed: false },
          { type: PrayerType.DHUHR, completed: false },
          { type: PrayerType.ASR, completed: false },
          { type: PrayerType.MAGHRIB, completed: false },
          { type: PrayerType.ISHA, completed: false }
        ];
        
        // √ñnce AsyncStorage'dan doƒürudan verileri al
        const today = new Date().toISOString().split('T')[0];
        const storedDate = await AsyncStorage.getItem('prayer_tracking_date');
        let tracking: PrayerStatus[] = [];
        
        console.log('PrayerTrackingCards - Bug√ºn:', today);
        console.log('PrayerTrackingCards - Kayƒ±tlƒ± tarih:', storedDate);
        
        if (storedDate === today) {
          const storedTracking = await AsyncStorage.getItem('prayer_tracking');
          console.log('PrayerTrackingCards - Kayƒ±tlƒ± takip verileri:', storedTracking);
          
          if (storedTracking) {
            tracking = JSON.parse(storedTracking);
          }
        }
        
        // Eƒüer AsyncStorage'dan veri alƒ±namazsa veya bo≈üsa, varsayƒ±lan verileri kullan
        if (!tracking || tracking.length === 0) {
          console.log('PrayerTrackingCards - AsyncStorage\'dan veri alƒ±namadƒ±, varsayƒ±lan veriler kullanƒ±lƒ±yor');
          tracking = defaultTracking;
          
          // Varsayƒ±lan verileri kaydet
          await AsyncStorage.setItem('prayer_tracking', JSON.stringify(defaultTracking));
          await AsyncStorage.setItem('prayer_tracking_date', today);
        }
        
        console.log('PrayerTrackingCards - Namaz takibi y√ºklendi:', tracking);
        
        // Namaz verilerini ayarla
        setPrayerTracking(tracking);
        
        // Tamamlanan namaz sayƒ±sƒ±nƒ± g√ºncelle
        const completedCount = tracking.filter(p => p.completed).length;
        setLocalCompletedCount(completedCount);
        console.log('PrayerTrackingCards - Tamamlanan namaz sayƒ±sƒ±:', completedCount);
      } catch (error) {
        console.error('PrayerTrackingCards - Namaz takibi y√ºklenirken hata olu≈ütu:', error);
        
        // Hata durumunda varsayƒ±lan namaz durumunu olu≈ütur
        const defaultTracking = [
          { type: PrayerType.FAJR, completed: false },
          { type: PrayerType.DHUHR, completed: false },
          { type: PrayerType.ASR, completed: false },
          { type: PrayerType.MAGHRIB, completed: false },
          { type: PrayerType.ISHA, completed: false }
        ];
        
        setPrayerTracking(defaultTracking);
        setLocalCompletedCount(0);
        
        // Hata mesajƒ± g√∂ster
        Alert.alert('Hata', 'Namaz takibi y√ºklenirken bir sorun olu≈ütu. Varsayƒ±lan veriler kullanƒ±lƒ±yor.');
      } finally {
        setIsLoading(false);
      }
    };
    
    const handlePrayerStatusUpdate = async (prayerType: PrayerType, completed: boolean) => {
      try {
        console.log(`PrayerTrackingCards - Namaz durumu g√ºncelleniyor: ${prayerType}, tamamlandƒ±: ${completed}`);
        
        // √ñnce yerel state'i g√ºncelle (daha hƒ±zlƒ± UI yanƒ±tƒ± i√ßin)
        const updatedTracking = prayerTracking.map(prayer => 
          prayer.type === prayerType ? { ...prayer, completed } : prayer
        );
        setPrayerTracking(updatedTracking);
        
        // Tamamlanan namaz sayƒ±sƒ±nƒ± g√ºncelle
        const completedCount = updatedTracking.filter(p => p.completed).length;
        setLocalCompletedCount(completedCount);
        
        // Namaz durumunu AsyncStorage'a kaydet
        await AsyncStorage.setItem('prayer_tracking', JSON.stringify(updatedTracking));
        
        // Namaz durumunu servise g√ºncelle
        await updatePrayerStatus(prayerType, completed);
        
        console.log('PrayerTrackingCards - G√ºncellenmi≈ü namaz takibi:', updatedTracking);
        console.log('PrayerTrackingCards - G√ºncellenmi≈ü tamamlanan namaz sayƒ±sƒ±:', completedCount);
        
        // T√ºm namazlarƒ±n tamamlanƒ±p tamamlanmadƒ±ƒüƒ±nƒ± kontrol et
        const allCompleted = updatedTracking.every(prayer => prayer.completed);
        
        if (allCompleted) {
          console.log('PrayerTrackingCards - T√ºm namazlar tamamlandƒ±');
          // Namaz tamamlama durumunu g√ºncelle
          await updateDailyPrayerCompletion(true);
          
          // Eƒüer sureler de tamamlandƒ±ysa streak'i g√ºncelle
          const surahCompleted = await getDailySurahCompletion();
          if (surahCompleted) {
            console.log('PrayerTrackingCards - Sureler de tamamlandƒ±, streak g√ºncelleniyor');
            const { streakCount: newStreakCount } = await checkAndUpdateStreak();
            onPrayerComplete();
          }
        }
        
        // Animasyon efekti ekle
        Animated.sequence([
          Animated.timing(scaleAnim, {
            toValue: 1.1,
            duration: 100,
            useNativeDriver: true
          }),
          Animated.timing(scaleAnim, {
            toValue: 1,
            duration: 100,
            useNativeDriver: true
          })
        ]).start();
      } catch (error) {
        console.error('PrayerTrackingCards - Namaz durumu g√ºncellenirken hata olu≈ütu:', error);
        Alert.alert('Hata', 'Namaz durumu g√ºncellenirken bir sorun olu≈ütu.');
      }
    };
    
    return (
      <>
        <View style={styles.trackingCardsContainer}>
          <TouchableOpacity 
            style={styles.trackingCard}
            onPress={() => {
              setShowPrayerModal(true);
            }}
          >
            <View style={styles.trackingIconContainer}>
              <FontAwesome5 name="pray" size={24} color="#4CAF50" />
            </View>
            <View style={styles.trackingTextContainer}>
              <Text style={styles.trackingTitle}>G√ºnl√ºk Namazlar</Text>
              <Text style={styles.trackingCount}>{localCompletedCount}/5</Text>
            </View>
            <View style={styles.trackingButton}>
              <Text style={styles.trackingButtonText}>G√∂r√ºnt√ºle</Text>
            </View>
          </TouchableOpacity>
          
          <View style={styles.trackingCard}>
            <View style={styles.trackingIconContainer}>
              <FontAwesome5 name="book" size={24} color="#4CAF50" />
            </View>
            <View style={styles.trackingTextContainer}>
              <Text style={styles.trackingTitle}>G√ºnl√ºk Sureler</Text>
              <Text style={styles.trackingCount}>
                {completedSurahs}/5 Sure
              </Text>
            </View>
            <TouchableOpacity 
              style={[
                styles.trackingButton,
                completedSurahs >= 5 && styles.trackingButtonDisabled
              ]}
              onPress={onSurahComplete}
              disabled={completedSurahs >= 5}
            >
              <Text style={[
                styles.trackingButtonText,
                completedSurahs >= 5 && styles.trackingButtonTextDisabled
              ]}>
                {completedSurahs >= 5 ? 'Tamamlandƒ±' : 'Tamamla'}
              </Text>
            </TouchableOpacity>
          </View>
          
          <View style={styles.trackingCard}>
            <View style={styles.trackingIconContainer}>
              <MaterialCommunityIcons name="calendar-check" size={24} color="#4CAF50" />
            </View>
            <View style={styles.trackingTextContainer}>
              <Text style={styles.trackingTitle}>Toplam</Text>
              <Text style={styles.trackingCount}>{localCompletedCount + completedSurahs}/10</Text>
            </View>
            <View style={styles.trackingProgressContainer}>
              <View 
                style={[
                  styles.trackingProgress, 
                  { width: `${((localCompletedCount + completedSurahs) / 10) * 100}%` }
                ]} 
              />
            </View>
          </View>
        </View>
        
        <Modal
          visible={showPrayerModal}
          transparent={true}
          animationType="slide"
          onRequestClose={() => setShowPrayerModal(false)}
        >
          <View style={styles.modalOverlay}>
            <View style={styles.modalContainer}>
              <View style={styles.modalHeader}>
                <Text style={styles.modalTitle}>G√ºnl√ºk Namazlar</Text>
                <TouchableOpacity 
                  style={styles.closeButton}
                  onPress={() => setShowPrayerModal(false)}
                >
                  <Ionicons name="close" size={24} color="#333" />
                </TouchableOpacity>
              </View>
              
              {isLoading ? (
                <View style={styles.loadingContainer}>
                  <ActivityIndicator size="large" color="#4CAF50" />
                  <Text style={styles.loadingText}>Namaz bilgileri y√ºkleniyor...</Text>
                </View>
              ) : prayerTracking.length === 0 ? (
                <View style={styles.emptyContainer}>
                  <FontAwesome5 name="pray" size={48} color="#E0E0E0" />
                  <Text style={styles.emptyText}>Namaz bilgileri bulunamadƒ±</Text>
                  <TouchableOpacity 
                    style={styles.reloadButton}
                    onPress={loadPrayerTracking}
                  >
                    <Text style={styles.reloadButtonText}>Yeniden Y√ºkle</Text>
                  </TouchableOpacity>
                </View>
              ) : (
                <ScrollView style={styles.modalContent}>
                  {prayerTracking.map((prayer, index) => {
                    const prayerInfo = getPrayerInfo().find(p => p.type === prayer.type);
                    if (!prayerInfo) return null;
                    
                    return (
                      <TouchableOpacity 
                        key={index}
                        style={styles.prayerItem}
                        onPress={() => handlePrayerStatusUpdate(prayer.type, !prayer.completed)}
                      >
                        <View style={[
                          styles.prayerCheckbox,
                          prayer.completed && styles.prayerCheckboxChecked
                        ]}>
                          {prayer.completed && (
                            <Ionicons name="checkmark" size={18} color="#fff" />
                          )}
                        </View>
                        <View style={styles.prayerInfo}>
                          <Text style={styles.prayerName}>{prayerInfo.name || getPrayerName(prayer.type)}</Text>
                          <Text style={styles.prayerRakats}>{prayerInfo.rakats} rekat</Text>
                        </View>
                        <Text style={[
                          styles.prayerTime,
                          prayer.completed ? styles.prayerCompleted : styles.prayerNotCompleted
                        ]}>
                          {prayer.completed ? 'Tamamlandƒ±' : 'Tamamlanmadƒ±'}
                        </Text>
                      </TouchableOpacity>
                    );
                  })}
                  
                  <View style={styles.modalFooter}>
                    <Text style={styles.modalFooterText}>
                      Tamamlanan Namazlar: {localCompletedCount}/5
                    </Text>
                    <TouchableOpacity 
                      style={[
                        styles.completeAllButton,
                        localCompletedCount === 5 && styles.completeAllButtonDisabled
                      ]}
                      onPress={async () => {
                        if (localCompletedCount === 5) return;
                        
                        // T√ºm namazlarƒ± tamamla
                        const updatedTracking = prayerTracking.map(prayer => ({
                          ...prayer,
                          completed: true
                        }));
                        
                        // State'i g√ºncelle
                        setPrayerTracking(updatedTracking);
                        setLocalCompletedCount(5);
                        
                        // AsyncStorage'a kaydet
                        await AsyncStorage.setItem('prayer_tracking', JSON.stringify(updatedTracking));
                        
                        // Servisi g√ºncelle
                        for (const prayer of updatedTracking) {
                          await updatePrayerStatus(prayer.type, true);
                        }
                        
                        // Namaz tamamlama durumunu g√ºncelle
                        await updateDailyPrayerCompletion(true);
                        
                        // Eƒüer sureler de tamamlandƒ±ysa streak'i g√ºncelle
                        const surahCompleted = await getDailySurahCompletion();
                        if (surahCompleted) {
                          const { streakCount: newStreakCount } = await checkAndUpdateStreak();
                          onPrayerComplete();
                        }
                        
                        // Bildirim g√∂ster
                        Alert.alert('Ba≈üarƒ±lƒ±', 'T√ºm namazlar tamamlandƒ±!');
                      }}
                      disabled={localCompletedCount === 5}
                    >
                      <Text style={[
                        styles.completeAllButtonText,
                        localCompletedCount === 5 && styles.completeAllButtonTextDisabled
                      ]}>
                        {localCompletedCount === 5 ? 'T√ºm Namazlar Tamamlandƒ±' : 'T√ºm√ºn√º Tamamla'}
                      </Text>
                    </TouchableOpacity>
                  </View>
                </ScrollView>
              )}
            </View>
          </View>
        </Modal>
      </>
    );
  };

  const loadInitialData = async () => {
    try {
      setLoading(true);
      
      // Streak sayƒ±sƒ±nƒ± y√ºkle
      const streak = await getStreakCount();
      setStreakCount(streak);
      
      // Tamamlanan sure sayƒ±sƒ±nƒ± y√ºkle
      const completedSurahsStr = await AsyncStorage.getItem('completed_surahs_count');
      const completedCount = completedSurahsStr ? parseInt(completedSurahsStr, 10) : 0;
      setCompletedSurahs(completedCount);
      
      // Burada tamamlanan namazlarƒ± da y√ºkleyebilirsiniz
      // √ñrnek olarak 0 atƒ±yorum, ger√ßek uygulamada bu deƒüer bir servisten gelmelidir
      setCompletedPrayers(0);
    } catch (error) {
      console.error('Veri y√ºklenirken hata olu≈ütu:', error);
      Alert.alert('Hata', 'Veriler y√ºklenirken bir sorun olu≈ütu.');
    } finally {
      setLoading(false);
    }
  };

  const handlePrayerCompletion = useCallback(async () => {
    try {
      // Namaz tamamlama durumunu g√ºncelle
      await loadPrayerTracking();
      
      // Streak g√ºncellemesi
      const newStreakCount = await getStreakCount();
      setStreakCount(newStreakCount);
      
      // Animasyon efekti ekle
      Animated.sequence([
        Animated.timing(scaleAnim, {
          toValue: 1.1,
          duration: 100,
          useNativeDriver: true
        }),
        Animated.timing(scaleAnim, {
          toValue: 1,
          duration: 100,
          useNativeDriver: true
        })
      ]).start();
    } catch (error) {
      console.error('Namaz kaydedilirken hata olu≈ütu:', error);
      Alert.alert('Hata', 'Namazƒ±nƒ±z kaydedilirken bir sorun olu≈ütu.');
    }
  }, []);

  const handleSurahCompletion = useCallback(async () => {
    try {
      // Eƒüer sureler zaten tamamlanmƒ±≈üsa, i≈ülem yapma
      if (completedSurahs >= 5) {
        Alert.alert('Bilgi', 'Bug√ºnk√º sureler zaten tamamlandƒ±.');
        return;
      }
      
      // Tamamlanan sure sayƒ±sƒ±nƒ± bir artƒ±r
      const newCompletedCount = completedSurahs + 1;
      setCompletedSurahs(newCompletedCount);
      
      // Tamamlanan sure sayƒ±sƒ±nƒ± kaydet
      await AsyncStorage.setItem('completed_surahs_count', newCompletedCount.toString());
      console.log('PrayerGuideScreen - Tamamlanan sure sayƒ±sƒ± g√ºncellendi:', newCompletedCount);
      
      // Eƒüer t√ºm sureler tamamlandƒ±ysa, sure tamamlama durumunu g√ºncelle
      if (newCompletedCount >= 5) {
        await updateDailySurahCompletion(true);
        console.log('PrayerGuideScreen - T√ºm sureler tamamlandƒ±, durum g√ºncellendi');
        
        // Eƒüer namazlar da tamamlandƒ±ysa streak'i g√ºncelle
        const prayerCompleted = await getDailyPrayerCompletion();
        if (prayerCompleted) {
          console.log('PrayerGuideScreen - Namazlar da tamamlandƒ±, streak g√ºncelleniyor');
          const { streakCount: newStreakCount } = await checkAndUpdateStreak();
          setStreakCount(newStreakCount);
        }
        
        // Bildirim g√∂ster
        Alert.alert('Tebrikler!', 'G√ºnl√ºk sureler tamamlandƒ±!');
      } else {
        // Bildirim g√∂ster
        Alert.alert('Ba≈üarƒ±lƒ±', `${newCompletedCount}. sure tamamlandƒ±! ${5 - newCompletedCount} sure kaldƒ±.`);
      }
      
      // Animasyon efekti ekle
      Animated.sequence([
        Animated.timing(scaleAnim, {
          toValue: 1.1,
          duration: 100,
          useNativeDriver: true
        }),
        Animated.timing(scaleAnim, {
          toValue: 1,
          duration: 100,
          useNativeDriver: true
        })
      ]).start();
    } catch (error) {
      console.error('Sure tamamlanƒ±rken hata olu≈ütu:', error);
      Alert.alert('Hata', 'Sureler tamamlanƒ±rken bir sorun olu≈ütu.');
    }
  }, [completedSurahs]);

  const goBack = () => {
    navigation.goBack();
  };

  // Zikirmatik kartƒ± bile≈üeni
  const ZikirCard = () => {
    const [zikirData, setZikirData] = useState({
      date: new Date().toISOString().split('T')[0],
      subhanallah: 0,
      elhamdulillah: 0,
      allahuekber: 0,
      total: 0
    });

    // Zikir verilerini y√ºkle
    const loadZikirData = async () => {
      try {
        const today = new Date().toISOString().split('T')[0];
        const storedData = await AsyncStorage.getItem(`zikir_${today}`);
        if (storedData) {
          setZikirData(JSON.parse(storedData));
        }
      } catch (error) {
        console.error('Zikir verileri y√ºklenirken hata:', error);
      }
    };

    // Zikir verilerini kaydet
    const saveZikirData = async (newData: typeof zikirData) => {
      try {
        await AsyncStorage.setItem(`zikir_${newData.date}`, JSON.stringify(newData));
      } catch (error) {
        console.error('Zikir verileri kaydedilirken hata:', error);
      }
    };

    // Zikir sayƒ±sƒ±nƒ± artƒ±r
    const handleZikirIncrement = async (type: 'subhanallah' | 'elhamdulillah' | 'allahuekber') => {
      const newData = {
        ...zikirData,
        [type]: zikirData[type] + 1,
        total: zikirData.total + 1
      };
      setZikirData(newData);
      await saveZikirData(newData);
    };

    // Component y√ºklendiƒüinde verileri getir
    useEffect(() => {
      loadZikirData();
    }, []);

    return (
      <View style={styles.zikirCardContainer}>
        <View style={styles.zikirCardHeader}>
          <FontAwesome5 name="pray" size={20} color="#4CAF50" solid />
          <Text style={styles.zikirCardTitle}>Zikir Sayacƒ±</Text>
          <TouchableOpacity onPress={() => setShowCalendarModal(true)}>
            <MaterialCommunityIcons name="calendar-month" size={22} color="#757575" />
          </TouchableOpacity>
        </View>

        <View style={styles.zikirCountContainer}>
          <Text style={styles.zikirCountText}>
            {zikirData.total}/33 Zikir
          </Text>
          <View style={styles.zikirProgressBar}>
            <View
              style={[
                styles.zikirProgressBarFill,
                { width: `${Math.min(100, (zikirData.total / 33) * 100)}%` },
              ]}
            />
          </View>
        </View>

        <View style={styles.zikirButtonsContainer}>
          <TouchableOpacity 
            style={styles.zikirButton}
            onPress={() => handleZikirIncrement('subhanallah')}
            activeOpacity={0.7}
          >
            <View style={styles.zikirButtonTextContainer}>
              <Text style={styles.zikirButtonText}>S√ºbhanallah</Text>
            </View>
            <Text style={styles.zikirButtonCount}>{zikirData.subhanallah}</Text>
          </TouchableOpacity>
          
          <TouchableOpacity 
            style={styles.zikirButton}
            onPress={() => handleZikirIncrement('elhamdulillah')}
            activeOpacity={0.7}
          >
            <View style={styles.zikirButtonTextContainer}>
              <Text style={styles.zikirButtonText} numberOfLines={1} ellipsizeMode="tail">
                Elhamd√ºlillah
              </Text>
            </View>
            <Text style={styles.zikirButtonCount}>{zikirData.elhamdulillah}</Text>
          </TouchableOpacity>
          
          <TouchableOpacity 
            style={styles.zikirButton}
            onPress={() => handleZikirIncrement('allahuekber')}
            activeOpacity={0.7}
          >
            <View style={styles.zikirButtonTextContainer}>
              <Text style={styles.zikirButtonText}>Allahu Ekber</Text>
            </View>
            <Text style={styles.zikirButtonCount}>{zikirData.allahuekber}</Text>
          </TouchableOpacity>
        </View>
      </View>
    );
  };

  // Takvim modalƒ±
  const CalendarModal = () => {
    type ZikirData = {
      date: string;
      subhanallah: number;
      elhamdulillah: number;
      allahuekber: number;
      total: number;
    };

    const [calendarData, setCalendarData] = useState<Record<string, ZikirData>>({});

    // Takvim verilerini y√ºkle
    const loadCalendarData = async () => {
      try {
        const keys = await AsyncStorage.getAllKeys();
        const zikirKeys = keys.filter(key => key.startsWith('zikir_'));
        const data: Record<string, ZikirData> = {};

        for (const key of zikirKeys) {
          const storedData = await AsyncStorage.getItem(key);
          if (storedData) {
            const zikirData = JSON.parse(storedData);
            data[zikirData.date] = zikirData;
          }
        }

        setCalendarData(data);
      } catch (error) {
        console.error('Takvim verileri y√ºklenirken hata:', error);
      }
    };

    useEffect(() => {
      if (showCalendarModal) {
        loadCalendarData();
      }
    }, [showCalendarModal]);

    return (
      <Modal
        visible={showCalendarModal}
        transparent={true}
        animationType="slide"
        onRequestClose={() => setShowCalendarModal(false)}
      >
        <View style={styles.modalOverlay}>
          <View style={styles.calendarModalContainer}>
            <View style={styles.modalHeader}>
              <Text style={styles.modalTitle}>Zikir Ge√ßmi≈üi</Text>
              <TouchableOpacity 
                style={styles.closeButton}
                onPress={() => setShowCalendarModal(false)}
              >
                <Ionicons name="close" size={24} color="#333" />
              </TouchableOpacity>
            </View>
            
            <ScrollView style={styles.calendarContent}>
              {Object.entries(calendarData)
                .sort((a, b) => new Date(b[0]).getTime() - new Date(a[0]).getTime())
                .map(([date, data]) => (
                  <View key={date} style={styles.calendarItem}>
                    <View style={styles.calendarDateContainer}>
                      <Text style={styles.calendarDate}>
                        {new Date(date).toLocaleDateString('tr-TR')}
                      </Text>
                    </View>
                    <View style={styles.calendarStats}>
                      <View style={styles.calendarDetailsContainer}>
                        <Text style={styles.calendarDetailText}>
                          S√ºbhanallah: {data.subhanallah}
                        </Text>
                        <Text style={styles.calendarDetailText}>
                          Elhamd√ºlillah: {data.elhamdulillah}
                        </Text>
                        <Text style={styles.calendarDetailText}>
                          Allahu Ekber: {data.allahuekber}
                        </Text>
                      </View>
                      <Text style={styles.calendarTotalCount}>
                        Toplam: {data.total}
                      </Text>
                    </View>
                  </View>
                ))}
            </ScrollView>
          </View>
        </View>
      </Modal>
    );
  };

  // Zikir t√ºrleri modalƒ±
  const ZikirTypesModal = () => {
    return (
      <Modal
        visible={showZikirTypesModal}
        transparent={true}
        animationType="slide"
        onRequestClose={() => setShowZikirTypesModal(false)}
      >
        <View style={styles.modalOverlay}>
          <View style={styles.modalContainer}>
            <View style={styles.modalHeader}>
              <Text style={styles.modalTitle}>Zikir T√ºrleri</Text>
              <TouchableOpacity 
                style={styles.closeButton}
                onPress={() => setShowZikirTypesModal(false)}
              >
                <Ionicons name="close" size={24} color="#333" />
              </TouchableOpacity>
            </View>
            
            <ScrollView style={styles.zikirModalListContent}>
              {zikirTypes.map((type) => (
                <TouchableOpacity 
                  key={type.id}
                  style={[
                    styles.zikirTypeListItem,
                    activeZikirType?.id === type.id && styles.activeZikirTypeListItem
                  ]}
                  onPress={() => handleZikirTypeChange(type)}
                >
                  <View style={styles.zikirTypeItemContent}>
                    <View>
                      <Text style={styles.zikirTypeItemName}>{type.name}</Text>
                      {type.arabic && <Text style={styles.zikirTypeItemArabic}>{type.arabic}</Text>}
                      {type.description && <Text style={styles.zikirTypeItemDescription}>{type.description}</Text>}
                    </View>
                    
                    <View style={styles.zikirTypeCountItem}>
                      <Text style={styles.zikirTypeCountValue}>
                        {activeZikirData?.count || 0}
                      </Text>
                    </View>
                  </View>
                </TouchableOpacity>
              ))}
            </ScrollView>
          </View>
        </View>
      </Modal>
    );
  };
  
  // Zikir Modalƒ± bile≈üeni d√ºzenlemesi
  const ZikirModal = () => {
    return (
      <Modal
        visible={showZikirModal}
        transparent={true}
        animationType="slide"
        onRequestClose={() => setShowZikirModal(false)}
      >
        <View style={styles.modalOverlay}>
          <View style={styles.modalContainer}>
            <View style={styles.modalHeader}>
              <Text style={styles.modalTitle}>Zikir Sayacƒ±</Text>
              <TouchableOpacity 
                style={styles.closeButton}
                onPress={() => setShowZikirModal(false)}
              >
                <Ionicons name="close" size={24} color="#333" />
              </TouchableOpacity>
            </View>
            
            <View style={styles.zikirModalContent}>
              <View style={styles.zikirTypeSelector}>
                <Text style={styles.zikirSectionTitle}>Zikir T√ºr√º</Text>
                <TouchableOpacity 
                  style={styles.zikirModalTypeButton}
                  onPress={() => setShowZikirTypesModal(true)}
                >
                  <Text style={styles.zikirModalTypeButtonText}>{zikirType}</Text>
                  <AntDesign name="down" size={16} color="#4CAF50" />
                </TouchableOpacity>
              </View>
              
              <View style={styles.zikirCounterSection}>
                <Text style={styles.zikirSectionTitle}>Saya√ß</Text>
                <Text style={styles.zikirCounter}>{zikirCount}</Text>
                <View style={styles.zikirProgressBar}>
                  <View 
                    style={[
                      styles.zikirProgressBarFill, 
                      { width: `${Math.min((zikirCount / zikirGoal) * 100, 100)}%` }
                    ]} 
                  />
                </View>
                <Text style={styles.zikirProgressText}>Hedef: {zikirGoal}</Text>
              </View>
              
              <View style={styles.zikirControlsSection}>
                <TouchableOpacity 
                  style={styles.zikirModalCountButton}
                  onPress={() => handleZikirIncrement()}
                >
                  <Text style={styles.zikirModalCountButtonText}>Zikir √áek (+1)</Text>
                </TouchableOpacity>
                
                <View style={styles.zikirSettingsContainer}>
                  <Text style={styles.zikirSectionTitle}>Ayarlar</Text>
                  
                  <View style={styles.zikirSetting}>
                    <Text style={styles.zikirSettingLabel}>G√ºnl√ºk Hedef</Text>
                    <View style={styles.zikirGoalInputContainer}>
                      <TextInput
                        style={styles.zikirGoalInput}
                        keyboardType="numeric"
                        value={zikirGoal.toString()}
                        onChangeText={(text) => {
                          const newGoal = parseInt(text) || 100;
                          handleGoalUpdate(newGoal);
                        }}
                      />
                    </View>
                  </View>
                  
                  <View style={styles.zikirSetting}>
                    <Text style={styles.zikirSettingLabel}>Titre≈üim</Text>
                    <Switch
                      value={enableVibration}
                      onValueChange={setEnableVibration}
                      trackColor={{ false: '#E0E0E0', true: '#A5D6A7' }}
                      thumbColor={enableVibration ? '#4CAF50' : '#BDBDBD'}
                    />
                  </View>
                  
                  <View style={styles.zikirSetting}>
                    <Text style={styles.zikirSettingLabel}>Ses</Text>
                    <Switch
                      value={enableSound}
                      onValueChange={setEnableSound}
                      trackColor={{ false: '#E0E0E0', true: '#A5D6A7' }}
                      thumbColor={enableSound ? '#4CAF50' : '#BDBDBD'}
                    />
                  </View>
                </View>
                
                <TouchableOpacity 
                  style={styles.zikirReminderButton}
                  onPress={() => setShowReminderModal(true)}
                >
                  <Text style={styles.zikirReminderButtonText}>Hatƒ±rlatƒ±cƒ± Ayarla</Text>
                </TouchableOpacity>
                
                <TouchableOpacity 
                  style={styles.zikirStatsButton}
                  onPress={() => setShowZikirStatsModal(true)}
                >
                  <Text style={styles.zikirStatsButtonText}>ƒ∞statistikleri G√∂r√ºnt√ºle</Text>
                </TouchableOpacity>
              </View>
            </View>
          </View>
        </View>
      </Modal>
    );
  };
  
  // Hatƒ±rlatƒ±cƒ± modal bile≈üeni
  const ReminderModal = () => {
    return (
      <Modal
        visible={showReminderModal}
        transparent={true}
        animationType="slide"
        onRequestClose={() => setShowReminderModal(false)}
      >
        <View style={styles.modalOverlay}>
          <View style={[styles.modalContainer, styles.smallModalContainer]}>
            <View style={styles.modalHeader}>
              <Text style={styles.modalTitle}>Hatƒ±rlatƒ±cƒ± Ayarla</Text>
              <TouchableOpacity 
                style={styles.closeButton}
                onPress={() => setShowReminderModal(false)}
              >
                <Ionicons name="close" size={24} color="#333" />
              </TouchableOpacity>
            </View>
            
            <View style={styles.reminderContent}>
              <Text style={styles.reminderLabel}>Zikir hatƒ±rlatƒ±cƒ±sƒ± i√ßin saat se√ßin:</Text>
              
              <View style={styles.timeInputContainer}>
                <TextInput
                  style={styles.timeInput}
                  keyboardType="numeric"
                  maxLength={2}
                  value={reminderHour}
                  onChangeText={setReminderHour}
                  placeholder="08"
                />
                <Text style={styles.timeSeparator}>:</Text>
                <TextInput
                  style={styles.timeInput}
                  keyboardType="numeric"
                  maxLength={2}
                  value={reminderMinute}
                  onChangeText={setReminderMinute}
                  placeholder="00"
                />
              </View>
              
              <TouchableOpacity 
                style={styles.reminderSetButton}
                onPress={handleSetReminder}
              >
                <Text style={styles.reminderSetButtonText}>Hatƒ±rlatƒ±cƒ±yƒ± Ayarla</Text>
              </TouchableOpacity>
            </View>
          </View>
        </View>
      </Modal>
    );
  };
  
  // ƒ∞statistikler modal bile≈üeni
  const StatsModal = () => {
    return (
      <Modal
        visible={showZikirStatsModal}
        transparent={true}
        animationType="slide"
        onRequestClose={() => setShowZikirStatsModal(false)}
      >
        <View style={styles.modalOverlay}>
          <View style={styles.modalContainer}>
            <View style={styles.modalHeader}>
              <Text style={styles.modalTitle}>Zikir ƒ∞statistikleri</Text>
              <TouchableOpacity 
                style={styles.closeButton}
                onPress={() => setShowZikirStatsModal(false)}
              >
                <Ionicons name="close" size={24} color="#333" />
              </TouchableOpacity>
            </View>
            
            <ScrollView style={styles.statsContent}>
              <View style={styles.statsSummaryContainer}>
                <View style={styles.statItem}>
                  <Text style={styles.statValue}>{zikirStats.todayTotal}</Text>
                  <Text style={styles.statLabel}>Bug√ºn</Text>
                </View>
                
                <View style={styles.statItem}>
                  <Text style={styles.statValue}>{zikirStats.weeklyTotal}</Text>
                  <Text style={styles.statLabel}>Bu Hafta</Text>
                </View>
                
                <View style={styles.statItem}>
                  <Text style={styles.statValue}>{zikirStats.monthlyTotal}</Text>
                  <Text style={styles.statLabel}>Bu Ay</Text>
                </View>
                
                <View style={styles.statItem}>
                  <Text style={styles.statValue}>{zikirStats.streakDays}</Text>
                  <Text style={styles.statLabel}>Streak</Text>
                </View>
              </View>
              
              {zikirStats.mostCommonZikir && (
                <View style={styles.mostCommonContainer}>
                  <Text style={styles.statsSectionTitle}>En √áok √áekilen Zikir</Text>
                  <Text style={styles.mostCommonZikir}>{zikirStats.mostCommonZikir}</Text>
                </View>
              )}
              
              <Text style={styles.statsSectionTitle}>Ge√ßmi≈ü Kayƒ±tlar</Text>
              
              {zikirHistory.length === 0 ? (
                <View style={styles.emptyHistoryContainer}>
                  <Text style={styles.emptyHistoryText}>Hen√ºz zikir kaydƒ± bulunmuyor.</Text>
                </View>
              ) : (
                <View style={styles.historyList}>
                  {zikirHistory.map((item, index) => (
                    <View key={index} style={styles.historyItem}>
                      <View style={styles.historyItemHeader}>
                        <Text style={styles.historyItemDate}>{item.date}</Text>
                        <Text style={styles.historyItemType}>{item.zikr_type}</Text>
                      </View>
                      <View style={styles.historyItemCounts}>
                        <Text style={styles.historyItemCount}>{item.count} / {item.goal}</Text>
                        {item.completed && (
                          <View style={styles.completedBadge}>
                            <Text style={styles.completedBadgeText}>Tamamlandƒ±</Text>
                          </View>
                        )}
                      </View>
                    </View>
                  ))}
                </View>
              )}
            </ScrollView>
          </View>
        </View>
      </Modal>
    );
  };

  return (
    <SafeAreaView style={styles.container}>
      <ScrollView contentContainerStyle={styles.scrollContent}>
      <View style={styles.topSection}>
        <View style={styles.placeholderLeft} />
        <Text style={styles.screenTitle}>Namaz Rehberi</Text>
        <View style={styles.placeholderRight} />
      </View>

        <View style={styles.streakBannerContainer}>
          <View style={styles.streakBannerIcon}>
          <FontAwesome5 name="fire" size={20} color="#FF9800" />
        </View>
          <Text style={styles.streakBannerText}>{streakCount} G√ºnl√ºk Streak</Text>
        <TouchableOpacity 
            style={styles.streakBannerButton}
          onPress={() => Alert.alert('Streak Bilgisi', 'Her g√ºn namaz kƒ±larak ve sure okuyarak streak\'inizi artƒ±rabilirsiniz. Streak, d√ºzenli ibadet alƒ±≈ükanlƒ±ƒüƒ± kazanmanƒ±za yardƒ±mcƒ± olur.')}
        >
          <Ionicons name="information-circle-outline" size={20} color="#FF9800" />
        </TouchableOpacity>
      </View>

      <PrayerTrackingCards 
        completedPrayers={completedPrayers}
        completedSurahs={completedSurahs}
        streakCount={streakCount}
        onPrayerComplete={handlePrayerCompletion}
        onSurahComplete={handleSurahCompletion}
        prayerTrackingData={prayerTracking}
      />
        
        <ZikirCard />

      <View style={styles.contentWrapper}>
        <GeneralContent />
      </View>
      </ScrollView>
      
      {/* Zikirmatik Modallarƒ± */}
      <ZikirModal />
      <ZikirTypesModal />
      <ReminderModal />
      <StatsModal />
      <CalendarModal />
    </SafeAreaView>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: COLORS.background,
  },
  scrollContent: {
    padding: SPACING.md,
    paddingTop: SPACING.md,
  },
  
  // √úst b√∂l√ºm stilleri
  topSection: {
    flexDirection: "row",
    alignItems: "center",
    padding: SPACING.md,
  },
  placeholderLeft: {
    width: 40,
  },
  cardContainer: {
    backgroundColor: COLORS.card,
    borderRadius: 8,
    padding: SPACING.md,
    marginBottom: SPACING.md,
  },
  cardTitle: {
    fontSize: 16,
    fontWeight: 'bold',
    color: COLORS.text,
    marginBottom: 8,
  },
  stepContainer: {
    flexDirection: 'row',
    marginBottom: 16,
  },
  stepNumber: {
    backgroundColor: COLORS.primary,
    width: 36,
    height: 36,
    borderRadius: 18,
    alignItems: 'center',
    justifyContent: 'center',
    marginRight: 12,
  },
  stepNumberText: {
    color: COLORS.card,
    fontSize: 16,
    fontWeight: 'bold',
  },
  stepContent: {
    flex: 1,
  },
  stepTitle: {
    fontSize: 16,
    fontWeight: 'bold',
    color: COLORS.text,
    marginBottom: 4,
  },
  stepDescription: {
    fontSize: 14,
    color: COLORS.textSecondary,
    lineHeight: 20,
  },
  modalOverlay: {
    flex: 1,
    backgroundColor: 'rgba(0, 0, 0, 0.5)',
    justifyContent: 'center',
    alignItems: 'center',
  },
  modalContainer: {
    width: '90%',
    backgroundColor: COLORS.card,
    borderRadius: 8,
    maxHeight: '80%',
  },
  modalHeader: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
    padding: SPACING.md,
    borderBottomWidth: 1,
    borderBottomColor: COLORS.border,
  },
  modalTitle: {
    fontSize: 18,
    fontWeight: '600',
    color: COLORS.text,
  },
  closeButton: {
    width: 40,
    height: 40,
    justifyContent: 'center',
    alignItems: 'center',
  },
  zikirModalListContent: {
    padding: SPACING.md,
  },
  zikirTypeListItem: {
    paddingVertical: 12,
    borderBottomWidth: 1,
    borderBottomColor: COLORS.border,
  },
  zikirTypeItemContent: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
  },
  zikirTypeItemName: {
    fontSize: 16,
    fontWeight: '600',
    color: COLORS.text,
  },
  zikirTypeItemArabic: {
    fontSize: 14,
    color: COLORS.textSecondary,
    marginBottom: 4,
  },
  zikirTypeItemDescription: {
    fontSize: 14,
    color: COLORS.textSecondary,
    lineHeight: 20,
  },
  zikirTypeCountItem: {
    alignItems: 'center',
  },
  zikirTypeCountValue: {
    fontSize: 16,
    fontWeight: 'bold',
    color: COLORS.primary,
  },
  activeZikirTypeListItem: {
    backgroundColor: '#E8F5E9',
  },
  zikirModalContent: {
    padding: SPACING.md,
  },
  zikirTypeSelector: {
    marginBottom: SPACING.md,
  },
  zikirSectionTitle: {
    fontSize: 16,
    fontWeight: '600',
    color: COLORS.text,
    marginBottom: 8,
  },
  zikirCounterSection: {
    alignItems: 'center',
    marginBottom: SPACING.lg,
  },
  zikirCounter: {
    fontSize: 48,
    fontWeight: 'bold',
    color: COLORS.primary,
    marginVertical: SPACING.md,
  },
  zikirControlsSection: {
    alignItems: 'center',
  },
  zikirSettingsContainer: {
    width: '100%',
    marginTop: SPACING.md,
  },
  zikirSetting: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
    marginBottom: SPACING.sm,
  },
  zikirSettingLabel: {
    fontSize: 16,
    color: COLORS.text,
  },
  zikirGoalInputContainer: {
    flexDirection: 'row',
    alignItems: 'center',
  },
  zikirGoalInput: {
    width: 80,
    height: 40,
    borderWidth: 1,
    borderColor: COLORS.border,
    borderRadius: 8,
    paddingHorizontal: 12,
    fontSize: 16,
    textAlign: 'center',
  },
  zikirReminderButton: {
    backgroundColor: COLORS.background,
    paddingVertical: 12,
    paddingHorizontal: 24,
    borderRadius: 8,
    marginTop: SPACING.md,
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
  },
  zikirReminderButtonText: {
    fontSize: 16,
    color: COLORS.primary,
    marginLeft: 8,
  },
  zikirStatsButton: {
    backgroundColor: COLORS.background,
    paddingVertical: 12,
    paddingHorizontal: 24,
    borderRadius: 8,
    marginTop: SPACING.sm,
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
  },
  zikirStatsButtonText: {
    fontSize: 16,
    color: COLORS.primary,
    marginLeft: 8,
  },
  reminderContent: {
    padding: SPACING.md,
  },
  reminderLabel: {
    fontSize: 16,
    color: COLORS.text,
    marginBottom: SPACING.md,
  },
  timeInputContainer: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    marginBottom: SPACING.md,
  },
  timeInput: {
    width: 60,
    height: 40,
    borderWidth: 1,
    borderColor: COLORS.border,
    borderRadius: 8,
    paddingHorizontal: 12,
    fontSize: 16,
    textAlign: 'center',
  },
  timeSeparator: {
    fontSize: 24,
    marginHorizontal: 8,
    color: COLORS.text,
  },
  reminderSetButton: {
    backgroundColor: COLORS.primary,
    paddingVertical: 12,
    paddingHorizontal: 24,
    borderRadius: 8,
    alignItems: 'center',
  },
  reminderSetButtonText: {
    fontSize: 16,
    fontWeight: '600',
    color: COLORS.card,
  },
  statsContent: {
    padding: SPACING.md,
  },
  statsSummaryContainer: {
    flexDirection: 'row',
    flexWrap: 'wrap',
    justifyContent: 'space-between',
    marginBottom: SPACING.lg,
  },
  statItem: {
    alignItems: 'center',
    width: '48%',
    backgroundColor: COLORS.background,
    padding: SPACING.md,
    borderRadius: 8,
    marginBottom: SPACING.sm,
  },
  statValue: {
    fontSize: 24,
    fontWeight: 'bold',
    color: COLORS.primary,
    marginBottom: 4,
  },
  statLabel: {
    fontSize: 14,
    color: COLORS.textSecondary,
  },
  mostCommonContainer: {
    backgroundColor: COLORS.background,
    padding: SPACING.md,
    borderRadius: 8,
    marginBottom: SPACING.md,
  },
  mostCommonZikir: {
    fontSize: 18,
    fontWeight: '600',
    color: COLORS.primary,
    textAlign: 'center',
    marginTop: 8,
  },
  historyList: {
    marginTop: SPACING.md,
  },
  historyItem: {
    backgroundColor: COLORS.background,
    padding: SPACING.md,
    borderRadius: 8,
    marginBottom: SPACING.sm,
  },
  historyItemHeader: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    marginBottom: 4,
  },
  historyItemDate: {
    fontSize: 14,
    color: COLORS.textSecondary,
  },
  historyItemType: {
    fontSize: 14,
    fontWeight: '500',
    color: COLORS.primary,
  },
  historyItemCounts: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
  },
  historyItemCount: {
    fontSize: 16,
    fontWeight: '600',
    color: COLORS.text,
  },
  completedBadge: {
    backgroundColor: '#E8F5E9',
    paddingVertical: 4,
    paddingHorizontal: 8,
    borderRadius: 4,
  },
  completedBadgeText: {
    fontSize: 12,
    color: COLORS.primary,
  },
  emptyHistoryContainer: {
    padding: SPACING.md,
    alignItems: 'center',
  },
  emptyHistoryText: {
    fontSize: 16,
    color: COLORS.textSecondary,
    textAlign: 'center',
  },
  contentWrapper: {
    flex: 1,
    paddingHorizontal: SPACING.md,
  },
  screenTitle: {
    fontSize: 20,
    fontWeight: '600',
    color: COLORS.text,
  },
  placeholderRight: {
    width: 40,
  },
  streakBannerContainer: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: '#FFF3E0',
    padding: SPACING.sm,
    borderRadius: 8,
    marginBottom: SPACING.md,
  },
  streakBannerIcon: {
    marginRight: SPACING.sm,
  },
  streakBannerText: {
    fontSize: 16,
    fontWeight: '500',
    color: '#FF9800',
    flex: 1,
  },
  streakBannerButton: {
    padding: SPACING.xs,
  },
  smallModalContainer: {
    width: '90%',
    maxHeight: '40%',
  },
  moreZikirButton: {
    backgroundColor: COLORS.background,
    paddingVertical: 8,
    paddingHorizontal: 16,
    borderRadius: 8,
    alignItems: 'center',
    marginTop: 8,
  },
  moreZikirButtonText: {
    fontSize: 14,
    color: COLORS.primary,
  },
  statsSectionTitle: {
    fontSize: 18,
    fontWeight: '600',
    color: COLORS.text,
    marginBottom: SPACING.md,
  },
  // Checkbox stilleri
  checkboxContainer: {
    flexDirection: 'row',
    alignItems: 'center',
    paddingVertical: 12,
    borderBottomWidth: 1,
    borderBottomColor: COLORS.border,
  },
  checkbox: {
    width: 24,
    height: 24,
    borderRadius: 12,
    borderWidth: 2,
    borderColor: COLORS.primary,
    marginRight: SPACING.md,
    justifyContent: 'center',
    alignItems: 'center',
  },
  checkboxChecked: {
    backgroundColor: COLORS.primary,
  },
  checkboxLabel: {
    fontSize: 16,
    color: COLORS.text,
  },

  // Streak g√∂sterge stilleri
  streakIndicatorContainer: {
    backgroundColor: '#FFF8E1',
    borderRadius: 12,
    padding: 12,
    marginBottom: 16,
  },
  streakIndicatorContent: {
    flexDirection: 'row',
    alignItems: 'center',
  },
  streakIndicatorIcon: {
    backgroundColor: '#FFF0C4',
    borderRadius: 30,
    width: 46,
    height: 46,
    justifyContent: 'center',
    alignItems: 'center',
    marginRight: 12,
  },
  streakIndicatorTextContainer: {
    flex: 1,
  },
  streakIndicatorTitle: {
    fontSize: 16,
    fontWeight: 'bold',
    color: COLORS.text,
  },
  streakIndicatorDescription: {
    fontSize: 12,
    color: COLORS.textSecondary,
    marginTop: 2,
  },
  streakIndicatorBadge: {
    backgroundColor: '#FF9800',
    borderRadius: 20,
    width: 32,
    height: 32,
    justifyContent: 'center',
    alignItems: 'center',
  },
  streakIndicatorCount: {
    color: COLORS.card,
    fontWeight: 'bold',
    fontSize: 16,
  },

  // ƒ∞√ßerik stilleri
  contentContainer: {
    paddingBottom: 24,
  },
  sectionContainer: {
    marginTop: 16,
    marginBottom: 16,
  },
  sectionTitle: {
    fontSize: 18,
    fontWeight: '600',
    color: COLORS.text,
    marginBottom: SPACING.md,
  },
  paragraph: {
    fontSize: 16,
    lineHeight: 24,
    color: COLORS.textSecondary,
    marginBottom: 12,
  },
  itemContainer: {
    marginBottom: 12,
  },
  // Kart stilleri
  infoCard: {
    flexDirection: 'row',
    backgroundColor: COLORS.card,
    padding: 14,
    borderRadius: 12,
    alignItems: 'center',
    marginBottom: 12,
  },
  iconCircle: {
    backgroundColor: '#E8F5E9',
    width: 44,
    height: 44,
    borderRadius: 22,
    justifyContent: 'center',
    alignItems: 'center',
    marginRight: 12,
  },
  cardDescription: {
    fontSize: 13,
    color: COLORS.textSecondary,
  },
  // Bilgi kartƒ± stilleri
  infoContainer: {
    marginBottom: 16,
  },
  infoItem: {
    flexDirection: 'row',
    marginBottom: 16,
    backgroundColor: COLORS.background,
    borderRadius: 8,
    padding: 12,
    borderWidth: 1,
    borderColor: COLORS.border,
  },
  infoIconContainer: {
    width: 36,
    height: 36,
    borderRadius: 18,
    backgroundColor: '#E8F5E9',
    justifyContent: 'center',
    alignItems: 'center',
    marginRight: 12,
  },
  infoContent: {
    flex: 1,
  },
  infoTitle: {
    fontSize: 16,
    fontWeight: '600',
    color: COLORS.text,
    marginBottom: 4,
  },
  infoDescription: {
    fontSize: 14,
    color: COLORS.textSecondary,
    lineHeight: 20,
  },

  // Ba≈ülƒ±k stilleri
  title: {
    fontSize: 24,
    fontWeight: 'bold',
    marginBottom: 16,
    color: COLORS.text,
  },
  arabicTitle: {
    fontSize: 20,
    marginBottom: 16,
    color: COLORS.primary,
    textAlign: 'right',
    fontFamily: 'System',
  },
  infoLabel: {
    fontSize: 16,
    fontWeight: 'bold',
    color: COLORS.text,
    marginBottom: 4,
  },
  infoValue: {
    fontSize: 16,
    color: COLORS.primary,
  },

  // Rekat stilleri
  rakatsContainer: {
    backgroundColor: COLORS.card,
    borderRadius: 8,
    padding: 12,
    borderWidth: 1,
    borderColor: COLORS.border,
  },
  rakatItem: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
  },
  rakatLabel: {
    fontSize: 16,
    color: COLORS.text,
  },
  rakatValue: {
    fontSize: 16,
    fontWeight: 'bold',
    color: COLORS.primary,
  },

  // Takip kartƒ± stilleri
  trackingCardsContainer: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    paddingHorizontal: SPACING.md,
    marginBottom: SPACING.md,
  },
  trackingCard: {
    flex: 1,
    backgroundColor: COLORS.card,
    borderRadius: 8,
    padding: SPACING.md,
    marginHorizontal: SPACING.xs,
  },
  trackingIconContainer: {
    width: 40,
    height: 40,
    borderRadius: 20,
    backgroundColor: COLORS.primary + "20",
    justifyContent: 'center',
    alignItems: 'center',
    marginRight: SPACING.md,
  },
  trackingTextContainer: {
    flex: 1,
  },
  trackingTitle: {
    fontSize: 16,
    fontWeight: 'bold',
    color: COLORS.text,
    marginBottom: 4,
  },
  trackingCount: {
    fontSize: 18,
    fontWeight: 'bold',
    color: COLORS.primary,
  },

  // Takip buton stilleri
  trackingButton: {
    backgroundColor: COLORS.primary,
    paddingVertical: 10,
    paddingHorizontal: 16,
    borderRadius: 8,
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
  },
  trackingButtonText: {
    color: COLORS.card,
    fontWeight: '600',
    marginLeft: 8,
    fontSize: 16,
  },
  trackingButtonDisabled: {
    backgroundColor: COLORS.background,
  },
  trackingButtonTextDisabled: {
    color: COLORS.textSecondary,
  },
  trackingProgressContainer: {
    height: 6,
    backgroundColor: COLORS.background,
    borderRadius: 3,
    overflow: 'hidden',
    width: '100%',
  },
  trackingProgress: {
    height: '100%',
    backgroundColor: COLORS.primary,
    borderRadius: 3,
  },
  
  // Y√ºkleme stilleri
  loadingContainer: {
    padding: 24,
    alignItems: 'center',
    justifyContent: 'center',
  },
  loadingText: {
    marginTop: 12,
    fontSize: 16,
    color: COLORS.textSecondary,
  },

  // Bo≈ü durum stilleri
  emptyContainer: {
    padding: 24,
    alignItems: 'center',
    justifyContent: 'center',
  },
  emptyText: {
    marginTop: 16,
    fontSize: 16,
    color: COLORS.textSecondary,
    marginBottom: 16,
  },
  reloadButton: {
    backgroundColor: '#E8F5E9',
    paddingVertical: 8,
    paddingHorizontal: 16,
    borderRadius: 8,
  },
  reloadButtonText: {
    color: COLORS.primary,
    fontWeight: '500',
  },

  // Modal i√ßerik stilleri
  modalContent: {
    paddingBottom: SPACING.md,
  },

  // Namaz stilleri
  prayerItem: {
    flexDirection: 'row',
    alignItems: 'center',
    paddingVertical: SPACING.md,
    paddingHorizontal: SPACING.sm,
    borderBottomWidth: 1,
    borderBottomColor: COLORS.border,
  },
  prayerCheckbox: {
    width: 28,
    height: 28,
    borderRadius: 14,
    borderWidth: 2,
    borderColor: COLORS.primary,
    marginRight: SPACING.md,
    justifyContent: 'center',
    alignItems: 'center',
  },
  prayerCheckboxChecked: {
    backgroundColor: COLORS.primary,
  },
  prayerInfo: {
    flex: 1,
  },
  prayerName: {
    fontSize: 16,
    fontWeight: '600',
    color: COLORS.text,
    marginBottom: 4,
  },

  // Namaz stilleri devamƒ±
  prayerRakats: {
    fontSize: 14,
    color: COLORS.textSecondary,
  },
  prayerTime: {
    fontSize: 14,
    fontWeight: '500',
    paddingHorizontal: SPACING.sm,
    paddingVertical: 6,
    borderRadius: 12,
  },
  prayerCompleted: {
    color: COLORS.primary,
    backgroundColor: '#E8F5E9',
  },
  prayerNotCompleted: {
    color: '#FF5722',
    backgroundColor: '#FBE9E7',
  },

  // Modal footer stilleri
  modalFooter: {
    marginTop: SPACING.md,
    paddingTop: SPACING.md,
    borderTopWidth: 1,
    borderTopColor: COLORS.border,
  },
  modalFooterText: {
    fontSize: 16,
    fontWeight: '600',
    color: COLORS.text,
    marginBottom: 12,
    textAlign: 'center',
  },
  completeAllButton: {
    backgroundColor: COLORS.primary,
    paddingVertical: 12,
    borderRadius: 8,
    alignItems: 'center',
  },
  completeAllButtonDisabled: {
    backgroundColor: COLORS.background,
  },
  completeAllButtonText: {
    color: COLORS.card,
    fontWeight: '600',
    fontSize: 16,
  },
  completeAllButtonTextDisabled: {
    color: COLORS.textSecondary,
  },

  // Zikir kartƒ± stilleri
  zikirCardContainer: {
    backgroundColor: COLORS.card,
    borderRadius: BORDER_RADIUS.md,
    padding: SPACING.md,
    marginHorizontal: SPACING.md,
    marginBottom: SPACING.md,
    ...SHADOW.sm,
  },
  zikirCardHeader: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
    marginBottom: SPACING.md,
  },
  zikirCardTitle: {
    fontSize: FONT_SIZE.lg,
    fontWeight: '600',
    color: COLORS.text,
  },
  zikirCountContainer: {
    alignItems: 'center',
    marginBottom: SPACING.md,
  },
  zikirCountText: {
    fontSize: FONT_SIZE.xxl,
    fontWeight: '700',
    color: COLORS.primary,
    marginBottom: SPACING.sm,
  },
  zikirProgressBar: {
    width: '100%',
    height: 8,
    backgroundColor: COLORS.background,
    borderRadius: BORDER_RADIUS.round,
    overflow: 'hidden',
  },
  zikirProgressBarFill: {
    height: '100%',
    backgroundColor: COLORS.primary,
    borderRadius: BORDER_RADIUS.round,
  },
  zikirHorizontalContainer: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginBottom: SPACING.md,
  },
  zikirDetailCard: {
    flex: 1,
    marginRight: SPACING.md,
  },
  zikirTypeText: {
    fontSize: FONT_SIZE.md,
    fontWeight: '600',
    color: COLORS.text,
    marginBottom: SPACING.xs,
  },
  zikirDescriptionText: {
    fontSize: FONT_SIZE.sm,
    color: COLORS.textSecondary,
  },
  zikirTypesContainer: {
    flexDirection: 'row',
    flexWrap: 'wrap',
    marginTop: SPACING.sm,
  },
  zikirCardTypeButton: {
    backgroundColor: COLORS.background,
    paddingVertical: SPACING.sm,
    paddingHorizontal: SPACING.md,
    borderRadius: BORDER_RADIUS.sm,
    marginRight: SPACING.sm,
    marginBottom: SPACING.sm,
  },
  activeZikirTypeButton: {
    backgroundColor: COLORS.primary,
  },
  zikirCardTypeButtonText: {
    fontSize: FONT_SIZE.sm,
    color: COLORS.text,
  },
  activeZikirTypeButtonText: {
    color: COLORS.white,
  },
  zikirModalTypeButton: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: COLORS.background,
    paddingVertical: SPACING.sm,
    paddingHorizontal: SPACING.md,
    borderRadius: BORDER_RADIUS.sm,
  },
  zikirModalTypeButtonText: {
    fontSize: FONT_SIZE.md,
    color: COLORS.primary,
    marginRight: SPACING.sm,
  },
  zikirProgressText: {
    fontSize: FONT_SIZE.sm,
    color: COLORS.textSecondary,
    marginTop: SPACING.xs,
  },
  zikirModalCountButton: {
    backgroundColor: COLORS.primary,
    paddingVertical: SPACING.md,
    borderRadius: BORDER_RADIUS.sm,
    alignItems: 'center',
    marginBottom: SPACING.md,
  },
  zikirModalCountButtonText: {
    fontSize: FONT_SIZE.md,
    fontWeight: '600',
    color: COLORS.white,
  },
  zikirButtonsContainer: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    marginTop: SPACING.sm,
  },
  zikirButton: {
    flex: 1,
    backgroundColor: COLORS.primary + '15', // Daha hafif arka plan rengi
    padding: SPACING.sm,
    borderRadius: BORDER_RADIUS.md, // Daha yumu≈üak k√∂≈üeler
    alignItems: 'center',
    justifyContent: 'space-between',
    marginHorizontal: 4,
    height: 70, // Buton y√ºksekliƒüi
    overflow: 'hidden',
    elevation: 1, // Android i√ßin hafif g√∂lge
    shadowColor: "#000", // iOS i√ßin hafif g√∂lge
    shadowOffset: { width: 0, height: 1 },
    shadowOpacity: 0.1,
    shadowRadius: 1,
  },
  zikirButtonTextContainer: {
    height: 20, 
    justifyContent: 'center',
    alignItems: 'center',
    width: '100%',
    marginBottom: 2,
  },
  zikirButtonText: {
    fontSize: 12, // Daha k√º√ß√ºk yazƒ± boyutu
    color: COLORS.primary,
    fontWeight: '600',
    textAlign: 'center',
    includeFontPadding: false,
  },
  zikirButtonCount: {
    fontSize: 22, // Daha b√ºy√ºk rakam
    color: COLORS.primary,
    fontWeight: '700',
    marginTop: 4,
  },

  // Takvim modal stilleri
  calendarModalContainer: {
    width: '90%',
    backgroundColor: COLORS.card,
    borderRadius: BORDER_RADIUS.lg,
    maxHeight: '80%',
  },
  calendarContent: {
    padding: SPACING.md,
  },
  calendarItem: {
    backgroundColor: COLORS.background,
    padding: SPACING.md,
    borderRadius: BORDER_RADIUS.sm,
    marginBottom: SPACING.sm,
  },
  calendarDateContainer: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginBottom: SPACING.sm,
  },
  calendarDate: {
    fontSize: FONT_SIZE.md,
    fontWeight: '600',
    color: COLORS.text,
  },
  calendarStats: {
    marginTop: SPACING.xs,
  },
  calendarCount: {
    fontSize: FONT_SIZE.md,
    color: COLORS.primary,
    fontWeight: '600',
    marginBottom: SPACING.xs,
  },
  calendarProgress: {
    height: 4,
    backgroundColor: COLORS.background,
    borderRadius: BORDER_RADIUS.round,
    overflow: 'hidden',
  },
  calendarProgressFill: {
    height: '100%',
    backgroundColor: COLORS.primary,
    borderRadius: BORDER_RADIUS.round,
  },
  calendarCompletedBadge: {
    backgroundColor: COLORS.primary + '20',
    paddingVertical: 4,
    paddingHorizontal: 8,
    borderRadius: BORDER_RADIUS.sm,
  },
  calendarCompletedBadgeText: {
    fontSize: FONT_SIZE.xs,
    color: COLORS.primary,
    fontWeight: '600',
  },
  calendarDetailsContainer: {
    marginTop: SPACING.xs,
  },
  calendarDetailText: {
    fontSize: FONT_SIZE.sm,
    color: COLORS.textSecondary,
    marginBottom: 2,
  },
  calendarTotalCount: {
    fontSize: FONT_SIZE.md,
    color: COLORS.primary,
    fontWeight: '600',
    marginTop: SPACING.xs,
  },
});

export { PrayerGuideScreen }; 